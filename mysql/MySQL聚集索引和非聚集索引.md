# MySQL聚集索引和非聚集索引

存储引擎与相关索引间的关系:

| 存储引擎 | 索引类型 | 主键叶子节点 | 非主键叶子节点 |
| :------- | :------- | :----------- | :------------- |
| MyISAM   | 非聚簇   | 数据地址     | 数据地址       |
| InnoDB   | 聚簇     | 全部数据     | 主键值         |
| key重复  |          | 不能         | 能             |

**名词解释**

**Clustered Index**：聚集索引，又称聚簇索引。

**Nonclustered indexes**：非聚集索引，又称非聚簇索引。

**Secondary Key**：二级索引，因为聚集索引只能有一个，所有同一个表其他字段只能是二级索引也就是非聚集索

**InnoDB中的聚簇索引:**在同一个结构中保存了B-Tree索引和数据行,数据行实际存放在索引的叶子页,数据行和相邻键值紧凑地存储在一起.因为无法同时把数据行放在两个地方,所以一个表只能又一个聚集索引.



**聚簇索引优点:**能极大的提升性能

- 将相关数据保存在一起,只需要读少数数据页就能获取信息,减少了磁盘I/O
- 数据访问快,从聚集索引中获取数据通常比非聚集索引快
- 使用覆盖索引扫描的查询可以直接使用页节点中的主键值

**聚簇索引缺点:**

- 对于数据全部在内存中的操作没有优势
- 插入速度依赖插入顺序,如果非顺序插入会导致性能衰退
- 更新索引列代价过高
- 主键更新或者插入新行可能会导致页分裂
- 数据不连续时导致全表扫描变慢
- 二级索引可能会比想象大,因为耳机索引的叶子节点包含了引用行的主键





























参考:[一句话说清聚集索引和非聚集索引以及MySQL的InnoDB和MyISAM](https://cloud.tencent.com/developer/article/1615563)