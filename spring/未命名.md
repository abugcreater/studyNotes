

![image-20220513141317774](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220513141317774.png)

AbstractApplicationContext实现了ConfigurableApplicationContext接口,并继承了DefaultResourceLoader类.

-------------------

DefaultResourceLoader类是ResourceLoader接口的默认实现类.ResourceLoader接口是用于加载资源（例如类路径或文件系统资源）的策略接口.

接口定义如下:

![image-20220513142233919](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220513142233919.png)

一共只包含两个方法, 

`getResource`返回指定资源位置的资源句柄。

`getClassLoader`暴露该ResourceLoader的ClassLoader而不依赖线程上下文.

`DefaultResourceLoader`通过持有ProtocolResolver处理资源获取问题.

---------------------

`ConfigurableApplicationContext`接口继承了 `Closeable`,`Lifecycle`,`ApplicationContext`接口

#### Closeable 

`Closeable`用于关闭和释放资源,是`AutoCloseable`接口的子接口,类图如下

![image-20220513150846613](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220513150846613.png)

只有一个接口方法`close()`

#### Lifecycle

`Lifecycle`定义启动/停止生命周期控制方法的通用接口.类图如下:

![image-20220513151310708](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220513151310708.png)

`start`方法,启动这个组件,如果已经启动了也不应该抛出错误.容器中会将启动信号传播到所有应用的组件.

`stop`方法,停止组件,通常以同步方式执行,以便组件在方法返回时停止,当需要异步停止行为时，请考虑实施SmartLifecycle及其stop(Runnable)变体。 Lifecycle bean 将首先收到停止通知，然后再传播一般的销毁回调.当容器刷新时会调用`destory`方法.如果容器没有在运行,则也不应该抛出错误.

`isRunning`方法,判断组件是否在运行中.当容器所有组件都运行时容器的返回才是true.

#### ApplicationContext

`ApplicationContext`接口,是为应用提供中心配置的接口.类图如下:

![image-20220513172015251](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220513172015251.png)



- 用于访问应用程序组件的 Bean 工厂方法。继承自`ListableBeanFactory `。
- 可作为层次结构的`HierarchicalBeanFactory`类,作为`beanFactory`子接口
- 以通用方式加载文件资源的能力。继承自`org.springframework.core.io.ResourceLoader`接口。
- 向注册的侦听器发布事件的能力。继承自`ApplicationEventPublisher`接口。
- 解决消息的能力，支持国际化。继承自`MessageSource`接口。
- 从父上下文继承。后代上下文中的定义将始终具有优先权。这意味着，例如，整个 Web 应用程序可以使用单个父上下文，而每个 servlet 都有自己的子上下文，该子上下文独立于任何其他 servlet
- 实现了`EnvironmentCapable`接口获取环境信息,理论上所有应用程序中的上下文都是`EnvironmentCapable`,该接口主要用于类型校验

