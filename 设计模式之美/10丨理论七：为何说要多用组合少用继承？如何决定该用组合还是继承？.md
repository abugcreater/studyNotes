# 10丨理论七：为何说要多用组合少用继承？如何决定该用组合还是继承？

## 为什么不推荐使用继承？

相较于继承的复用,继承层次过深,过复杂会影响代码的可维护性.

层次过深,继承越复杂会导致代码可读性变差;而且也破坏类的封装,将父类的实现细节暴露给了子类.子类的实现依赖父类的实现,两者高度耦合,一旦父类代码修改,就会影响所有子类的逻辑.

## 组合相比继承有哪些优势？

![UTOOLS1626346654181.png](https://img01.sogoucdn.com/app/a/100520146/2d0a9b105f82580094eb4a2c4c5a5680)

将各个功能分开为单个接口,每个功能都有自己的默认实现.想要实现多个功能时,继承相关接口,实现时使用默认实现类完成.

我们知道继承主要有三个作用：表示 is-a 关系，支持多态特性，代码复用。而这三个作用
都可以通过其他技术手段来达成。比如 is-a 关系，我们可以通过组合和接口的 has-a 关系
来替代；多态特性我们可以利用接口来实现；代码复用我们可以通过组合和委托来实现。所
以，从理论上讲，通过组合、接口、委托三个技术手段，我们完全可以替换掉继承，在项目
中不用或者少用继承关系，特别是一些复杂的继承关系。

## 如何判断该用组合还是继承？

继承改写成组合意味着要做更细粒度的类的拆分。这也就意味着，我们要定义更多的类和接口。类和接口的增多也就或多或少地增加代码的复杂程度和维护成本。

如果类之间的继承结构稳定（不会轻易改变），继承层次比较浅（比如，最多有两层继承关系），继承关系不复杂，我们就可以大胆地使用继承。





