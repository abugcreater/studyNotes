# 16 | 业务分组：如何隔离流量？

### 为什么需要分组？

我们可以尝试把应用提供方这个大池子划分出不同规格的小池子，再分配给不同的调用方，而不同小池子之间的隔离带，就是我们在 RPC 里面所说的分组，它可以实现流量隔离。

### 怎么实现分组？

改造服务发现的逻辑，调用方去获取服务节点的时候除了要带着接口名，还需要另外加一个分组参数，相应的服务提供方在注册的时候也要带上分组参数。

把服务提供方所有的实例分成若干组，每一个分组可以提供给单个或者多个不同的调用方来调用。

分组规则:非核心应用不要跟核心应用分在同一个组，核心应用之间应该做好隔离，一个重要的原则就是保障核心应用不受影响。

### 如何实现高可用？

调用方要拿到其它分组的服务节点，但是又不能拿到所有的服务节点，否则分组就没有意义了。

我们需要把配置的分组区分下主次分组，只有在主分组上的节点都不可用的情况下才去选择次分组节点；只要主分组里面的节点恢复正常，我们就必须把流量都切换到主节点上，整个切换过程对于应用层完全透明，从而在一定程度上保障调用方应用的高可用。