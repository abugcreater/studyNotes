# 13 | 线性排序：如何根据年龄给100万用户数据排序？

## 桶排序（Bucket sort）

桶排序，核心思想是将要排序的数据分到几个有序的桶里，每个桶里的数据再单独进行排序。桶内排完序之后，再把每个桶里的数据按照顺序依次取出，组成的序列就是有序的了。

时间复杂度分析: O(n),最坏情况下所有数据都在一个桶里,算法退化成单纯的快排O(nlogn).

如果要排序的数据有 n 个，我们把它们均匀地划分到 m 个桶内，每个桶里就有 k=n/m 个元素。每个桶内部使用快速排序，时间复杂度为 O(k * logk)。m 个桶排序的时间复杂度就是 O(m * k * logk)，因为 k=n/m，所以整个桶排序的时间复杂度就是 O(n*log(n/m))。当桶的个数 m 接近数据个数 n 时，log(n/m) 就是一个非常小的常量，这个时候桶排序的时间复杂度接近 O(n)。

桶排序适用条件,各个桶的排序比较均匀及外部排序中.

## 计数排序（Counting sort）

**计数排序其实是桶排序的一种特殊情况.**当要排序的 n 个数据，所处的范围并不大的时候，比如最大值是 k，我们就可以把数据划分成 k 个桶。每个桶内的数据值都是相同的，省掉了桶内排序的时间。

原始数据`{2, 5, 3, 0, 2, 3, 0, 3}`,获取最大值为5,分为5+1个桶

1. 首先需要统计每个桶中有多少个数据,得到结果`{2,0,2,3,0,1}`

2. 然后对获得的数组求和`{2,2,4,7,7,8}`得到每个下标中数据排序范围

3. 申请临时数组,根据求和结果对原始数组排序.排序算法如下图

![image-20211202172710078](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20211202172710078.png)

**计数排序只能用在数据范围不大的场景中，如果数据范围 k 比要排序的数据 n 大很多，就不适合用计数排序了。而且，计数排序只能给非负整数排序，如果要排序的数据是其他类型的，要将其在不改变相对大小的情况下，转化为非负整数。**

## 基数排序（Radix sort）

其原理是将整数按位数切割成不同的数字，然后按每个位数分别比较,使用稳定的排序算法进行比较.

**基数排序对要排序的数据是有要求的，需要可以分割出独立的“位”来比较，而且位之间有递进的关系，如果 a 数据的高位比 b 数据大，那剩下的低位就不用比较了。除此之外，每一位的数据范围不能太大，要可以用线性排序算法来排序，否则，基数排序的时间复杂度就无法做到 O(n) 了**。



## 解答开篇

如何根据年龄给 100 万用户排序？

根据年龄给 100 万用户排序，就类似按照成绩给 50 万考生排序。我们假设年龄的范围最小 1 岁，最大不超过 120 岁。我们可以遍历这 100 万用户，根据年龄将其划分到这 120 个桶里，然后依次顺序遍历这 120 个桶中的元素。这样就得到了按照年龄排序的 100 万用户数据。