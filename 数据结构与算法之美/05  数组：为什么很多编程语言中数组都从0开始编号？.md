# 05 | 数组：为什么很多编程语言中数组都从0开始编号？

## 如何实现随机访问？

数组定义:数组（Array）是一种线性表数据结构。它用一组连续的内存空间，来存储一组具有相同类型的数据。

关键词:

1. 线性表:线性表就是数据排成像一条线一样的结构。每个线性表上的数据最多只有前和后两个方向。其实除了数组，链表、队列、栈等也是线性表结构。

2. 连续的内存空间和相同类型的数据

![数组在内存中的存储](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20211019165002091.png)

## 低效的“插入”和“删除”

插入操作:假设数组的长度为 n，现在，如果我们需要将一个数据插入到数组中的第 k 个位置。为了把第 k 个位置腾出来，给新来的数据，我们需要将第 k～n 这部分的元素都顺序地往后挪一位。时间复杂度为O(n).

优化:将被插入位数据移动到最后,将带插入数据放到对应位置,这样就不需要大范围移动后面的数据.时间复杂度为O(1).

![image-20211019165314807](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20211019165314807.png)

删除操作:跟插入数据类似，如果我们要删除第 k 个位置的数据，为了内存的连续性，也需要搬移数据，不然中间就会出现空洞，内存就不连续了。时间复杂度为O(n).

优化:将被删除的数据标记为删除状态,当没有空间存放数据时在做真正的删除步骤.类似于Java GC.

![image-20211019165513278](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20211019165513278.png)

## 容器能否完全替代数组？

Java中ArrayList 的底层数据结构是数组,最大的优势就是**可以将很多数组操作的细节封装起来**,并且支持**动态扩容**.

1. 在特别关注性能的情况下,基本类型直接使用数组而不是容器,减少装箱的性能损耗.
2. 数据大小事先一只,且操作简单,可以使用数组.
3. 正常业务开发可以使用容器

## 解答开篇

为什么数组的下标从0开始?

从0开始内存计算的时候计算a[k]的内存地址,计算公式为

```
a[k]_address = base_address + k * type_size
```

如果从1开始则修改为

```
a[k]_address = base_address + (k - 1) * type_size
```

每次访问多一次减法运算,为了性能考虑所以选择从0开始.



